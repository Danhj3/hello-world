<!doctype html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Monitor Electoral 2026 | CIRCPyCS — UAGRM</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ["Inter", "sans-serif"] },
          boxShadow: { soft: '0 6px 22px rgba(2,6,23,.08)' }
        }
      }
    }
  </script>
  <style>
    /* Ajustes para móvil y scroll */
    section[id] { scroll-margin-top: 100px; }
    .timeline-line {
        position: absolute; left: 23px; top: 30px; bottom: -30px; width: 2px; background-color: #e2e8f0; z-index: 0;
    }
    .group:last-child .timeline-line { display: none; }
    .active-row .timeline-line { background-color: #f43f5e; } /* Rose-500 */

    /* Animación de pulso para el hito actual */
    @keyframes pulse-ring {
        0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(244, 63, 94, 0.7); }
        70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(244, 63, 94, 0); }
        100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(244, 63, 94, 0); }
    }
    .pulse-dot { animation: pulse-ring 2s infinite; }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800 font-sans">

  <div class="h-1 w-full bg-gradient-to-r from-emerald-600 via-sky-600 to-rose-600"></div>

  <header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <img src="https://i.imgur.com/ldeXZmG.png" alt="Logo UAGRM" class="h-10 w-auto" />
        <div class="leading-tight">
          <p class="text-xs tracking-wide text-slate-500 uppercase">UAGRM</p>
          <h1 class="font-bold text-lg text-slate-900">CIRCPyCS</h1>
        </div>
      </div>
      <div class="text-right hidden sm:block">
        <p class="text-xs font-bold text-rose-600 uppercase tracking-wider">Monitor Electoral</p>
        <p class="text-sm font-medium text-slate-600">Elecciones Autonómicas 2026</p>
      </div>
    </div>
  </header>

  <main>
    <section class="bg-white border-b border-slate-200 py-10">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row gap-8 items-center justify-between">
                <div>
                    <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide bg-rose-50 text-rose-600 border border-rose-100 mb-4">
                        <span class="w-2 h-2 rounded-full bg-rose-600 animate-pulse"></span> En Vivo
                    </span>
                    <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900 mb-2">Calendario Electoral 2026</h2>
                    <p class="text-slate-500 text-lg">Seguimiento oficial a las 110 actividades del TSE.</p>
                </div>

                <div class="grid grid-cols-2 gap-4 w-full md:w-auto">
                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100 text-center">
                        <p class="text-xs text-slate-400 uppercase font-bold">Fecha de Hoy</p>
                        <p class="text-xl font-bold text-slate-800 mt-1" id="display-date">--</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100 text-center">
                        <p class="text-xs text-slate-400 uppercase font-bold">Días para Votar</p>
                        <p class="text-xl font-bold text-rose-600 mt-1" id="days-left">--</p>
                    </div>
                </div>
            </div>

            <div class="mt-8">
                <div class="flex justify-between text-xs font-semibold text-slate-400 mb-2 uppercase">
                    <span>Inicio (Nov 2025)</span>
                    <span id="progress-text">0% Completado</span>
                    <span>Final (May 2026)</span>
                </div>
                <div class="h-3 w-full bg-slate-100 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-gradient-to-r from-emerald-500 to-sky-500 w-0 transition-all duration-1000"></div>
                </div>
            </div>
        </div>
    </section>

    <section id="timeline" class="py-12 bg-slate-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6">

            <div class="sticky top-24 z-30 mb-8">
                <div class="bg-white p-2 rounded-xl shadow-soft border border-slate-200 flex gap-2">
                    <div class="relative flex-grow">
                        <svg class="absolute left-3 top-3 text-slate-400 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        <input type="text" id="search" placeholder="Buscar actividad (ej: jurados, inhabilitados)..."
                        class="w-full pl-10 pr-4 py-2 bg-transparent focus:outline-none text-sm font-medium text-slate-700 placeholder:text-slate-400">
                    </div>
                    <button onclick="jumpToCurrent()" class="hidden sm:block px-4 py-2 bg-rose-50 text-rose-700 text-xs font-bold rounded-lg border border-rose-100 hover:bg-rose-100 transition">
                        Ir al día de hoy
                    </button>
                </div>
            </div>

            <div id="list-container" class="space-y-0 relative">
                </div>

            <p id="no-results" class="hidden text-center py-10 text-slate-500">No se encontraron resultados.</p>
        </div>
    </section>
  </main>

  <footer class="bg-white border-t border-slate-200 py-8 text-center text-sm text-slate-500">
    <p>© 2026 CIRCPyCS — UAGRM. Datos basados en Resolución TSE-RSP-ADM N° 0510/2025.</p>
  </footer>

  <script>
    // ==========================================
    // BASE DE DATOS: 110 HITOS (Extraído del PDF)
    // ==========================================
    // NOTA: Las fechas están parseadas a formato YYYY-MM-DD para que funcione la lógica.
    const activities = [
      {id:1, t:"Convocatoria a Elecciones", start:"2025-11-20", end:"2025-11-20", ref:"Ley 026 Art. 94"},
      {id:2, t:"Presentación balance patrimonial", start:"2025-11-21", end:"2025-12-05", ref:"Ley 026 Art. 265"},
      {id:3, t:"Registro de medios para propaganda", start:"2025-11-21", end:"2026-02-05", ref:"Ley 026 Art. 117"},
      {id:4, t:"Registro empresas de encuestas", start:"2025-11-21", end:"2025-12-20", ref:"Ley 026 Art. 132"},
      {id:5, t:"Publicación convocatoria web OEP", start:"2025-11-23", end:"2025-11-23", ref:"-"},
      {id:6, t:"Aprobación calendario electoral", start:"2025-11-26", end:"2025-11-26", ref:"Ley 026 Art. 97"},
      {id:7, t:"Publicación calendario prensa", start:"2025-11-30", end:"2025-11-30", ref:"Ley 026 Art. 95"},
      {id:8, t:"Publicación calendario web", start:"2025-11-30", end:"2025-11-30", ref:"Ley 026 Art. 95"},
      {id:9, t:"Designación jueces electorales", start:"2025-12-01", end:"2025-12-10", ref:"Ley 018 Art. 51"},
      {id:10, t:"Registro Naciones/Pueblos Indígenas", start:"2025-12-01", end:"2025-12-15", ref:"Ley 026 Art. 106"},
      {id:11, t:"Empadronamiento Biométrico Masivo", start:"2025-12-04", end:"2025-12-16", ref:"Ley 018 Art. 71"},
      {id:12, t:"Solicitud registro alianzas políticas", start:"2025-12-12", end:"2025-12-15", ref:"Ley 1700"},
      {id:13, t:"Registro delegados organizaciones", start:"2025-12-16", end:"2025-12-17", ref:"Ley 026 Art. 151"},
      {id:14, t:"Comunicación formal de participación", start:"2025-12-12", end:"2025-12-15", ref:"-"},
      {id:15, t:"Presentación actas elección interna", start:"2025-12-16", end:"2025-12-22", ref:"Ley 1096 Art. 28"},
      {id:16, t:"Presentación Programas de Gobierno", start:"2025-12-16", end:"2025-12-22", ref:"Ley 1096 Art. 21"},
      {id:17, t:"Consolidación registros biométricos", start:"2025-12-17", end:"2025-12-19", ref:"Reglamento Padrón"},
      {id:18, t:"Inscripción de Candidaturas", start:"2025-12-17", end:"2025-12-22", ref:"Ley 026 Art. 106"},
      {id:19, t:"Procesamiento biométrico (Padrón)", start:"2025-12-20", end:"2026-02-02", ref:"Reglamento Padrón"},
      {id:20, t:"Difusión propaganda actos públicos", start:"2025-12-22", end:"2026-03-18", ref:"Ley 026 Art. 116"},
      {id:21, t:"Renuncia candidatos cargos públicos", start:"2025-12-22", end:"2025-12-22", ref:"CPE Art. 238"},
      {id:22, t:"Rehabilitación ciudadanos inhabilitados", start:"2025-12-22", end:"2026-01-20", ref:"Reglamento Padrón"},
      {id:23, t:"Declaraciones juradas familiares fallecidos", start:"2025-12-22", end:"2026-01-20", ref:"Reglamento Padrón"},
      {id:24, t:"Publicación lista empresas encuestas", start:"2025-12-21", end:"2025-12-21", ref:"Ley 026 Art. 132"},
      {id:25, t:"Difusión estudios opinión (encuestas)", start:"2025-12-22", end:"2026-03-15", ref:"Ley 026 Art. 130"},
      {id:26, t:"Sustitución candidatos por renuncia", start:"2025-12-23", end:"2026-02-05", ref:"Ley 026 Art. 108"},
      {id:27, t:"Verificación requisitos candidaturas", start:"2025-12-23", end:"2025-12-28", ref:"Ley 026 Art. 105"},
      {id:28, t:"Publicación Programas de Gobierno web", start:"2025-12-28", end:"2025-12-28", ref:"Ley 1096 Art. 21"},
      {id:29, t:"Revisión paridad y alternancia género", start:"2025-12-29", end:"2026-01-02", ref:"Ley 026 Art. 107"},
      {id:30, t:"Informe revisión candidaturas", start:"2026-01-03", end:"2026-01-03", ref:"Ley 026 Art. 105"},
      {id:31, t:"Publicación Candidaturas Habilitadas", start:"2026-01-09", end:"2026-01-09", ref:"Ley 026 Art. 108"},
      {id:32, t:"Presentación diseño franjas papeleta", start:"2026-01-10", end:"2026-01-12", ref:"Ley 026 Art. 139"},
      {id:33, t:"Presentación demandas inhabilitación", start:"2026-01-10", end:"2026-03-07", ref:"Ley 026 Art. 209"},
      {id:34, t:"Supervisión elección pueblos indígenas", start:"2026-01-15", end:"2026-04-10", ref:"Ley 026 Art. 91"},
      {id:35, t:"Sorteo ubicación franjas papeleta", start:"2026-01-16", end:"2026-01-16", ref:"Ley 026 Art. 139"},
      {id:36, t:"Aprobación diseño papeleta sufragio", start:"2026-01-21", end:"2026-01-21", ref:"Ley 026 Art. 139"},
      {id:37, t:"Publicación mapa circunscripciones", start:"2026-01-25", end:"2026-01-25", ref:"Ley 026 Art. 102"},
      {id:38, t:"Revisión candidaturas en papeleta", start:"2026-01-26", end:"2026-01-27", ref:"Ley 026 Art. 139"},
      {id:39, t:"Remisión lista inhabilitados SERECI", start:"2026-02-03", end:"2026-02-03", ref:"Ley 018 Art. 71"},
      {id:40, t:"Carga listas 'Yo Participo'", start:"2026-02-03", end:"2026-02-04", ref:"Ley 018 Art. 77"},
      {id:41, t:"Publicación inhabilitados (Padrón)", start:"2026-02-05", end:"2026-02-05", ref:"Ley 018 Art. 77"},
      {id:42, t:"Reclamos inhabilitados Padrón", start:"2026-02-05", end:"2026-02-08", ref:"Ley 018 Art. 77"},
      {id:43, t:"Sustitución candidatos (otras causales)", start:"2026-02-06", end:"2026-03-18", ref:"Ley 026 Art. 108"},
      {id:44, t:"Remisión resoluciones reclamos Padrón", start:"2026-02-09", end:"2026-02-09", ref:"Ley 018 Art. 77"},
      {id:45, t:"Procesamiento reclamos SERECI", start:"2026-02-10", end:"2026-02-13", ref:"Reglamento Padrón"},
      {id:46, t:"Publicación medios habilitados prop.", start:"2026-02-10", end:"2026-02-10", ref:"Ley 026 Art. 117"},
      {id:47, t:"Entrega Padrón Electoral Oficial", start:"2026-02-14", end:"2026-02-14", ref:"Reglamento Padrón"},
      {id:48, t:"Publicación candidaturas sustituidas", start:"2026-02-15", end:"2026-02-15", ref:"Ley 026 Art. 108"},
      {id:49, t:"Convocatoria sorteo jurados", start:"2026-02-17", end:"2026-02-17", ref:"Ley 018 Art. 57"},
      {id:50, t:"Entrega credenciales acceso Padrón", start:"2026-02-18", end:"2026-02-18", ref:"Ley 026 Art. 98"},
      {id:51, t:"Designación notarios electorales", start:"2026-02-19", end:"2026-02-19", ref:"Ley 018 Art. 67"},
      {id:52, t:"Sorteo Jurados Electorales", start:"2026-02-20", end:"2026-02-20", ref:"Ley 018 Art. 57"},
      {id:53, t:"Difusión propaganda medios masivos", start:"2026-02-20", end:"2026-03-18", ref:"Ley 026 Art. 116"},
      {id:54, t:"Notificación jurados electorales", start:"2026-02-21", end:"2026-03-22", ref:"Ley 018 Art. 58"},
      {id:55, t:"Publicación lista jurados prensa", start:"2026-02-22", end:"2026-02-22", ref:"Ley 018 Art. 59"},
      {id:56, t:"Presentación excusas jurados", start:"2026-02-23", end:"2026-03-01", ref:"Ley 018 Art. 65"},
      {id:57, t:"Capacitación jurados electorales", start:"2026-03-01", end:"2026-03-22", ref:"Ley 018 Art. 56"},
      {id:58, t:"Periodo excepcional sustitución", start:"2026-03-07", end:"2026-03-18", ref:"Ley 026 Art. 83"},
      {id:59, t:"Publicación recintos electorales", start:"2026-03-15", end:"2026-03-15", ref:"Ley 018 Art. 38"},
      {id:60, t:"Publicación lugar de cómputo", start:"2026-03-19", end:"2026-03-19", ref:"Ley 026 Art. 175"},
      {id:61, t:"Silencio Electoral (Prohibición)", start:"2026-03-20", end:"2026-03-22", ref:"Ley 026 Art. 122"},
      {id:62, t:"Publicación final candidaturas", start:"2026-03-21", end:"2026-03-21", ref:"Ley 026 Art. 108"},
      {id:63, t:"TEDs asumen mando fuerza pública", start:"2026-03-22", end:"2026-03-22", ref:"Ley 026 Art. 148"},
      {id:64, t:"DÍA DE LA ELECCIÓN AUTONÓMICA", start:"2026-03-22", end:"2026-03-22", ref:"CPE Art. 156"},
      {id:65, t:"Entrega cert. impedimento sufragio", start:"2026-03-22", end:"2026-03-22", ref:"Ley 026 Art. 145"},
      {id:66, t:"Inicio cómputo departamental (18:00)", start:"2026-03-22", end:"2026-03-22", ref:"Ley 026 Art. 175"},
      {id:67, t:"Difusión boca de urna (20:00)", start:"2026-03-22", end:"2026-03-22", ref:"Ley 026 Art. 130"},
      {id:68, t:"Resultados Preliminares (DIREPRE)", start:"2026-03-22", end:"2026-03-22", ref:"Ley 1632"},
      {id:69, t:"Cómputo Oficial Departamental", start:"2026-03-22", end:"2026-03-29", ref:"Ley 026 Art. 175"},
      {id:70, t:"Entrega certificados exención", start:"2026-03-23", end:"2026-04-21", ref:"Ley 026 Art. 145"},

      // ESCENARIO EXTENDIDO (Segunda Vuelta y Repetición - PDF Item 71 en adelante)
      {id:71, t:"Difusión propaganda (Repetición)", start:"2026-03-29", end:"2026-04-01", ref:"Escenario Repetición"},
      {id:72, t:"Sorteo jurados (Repetición)", start:"2026-03-30", end:"2026-03-30", ref:"Escenario Repetición"},
      {id:73, t:"Notificación jurados (Repetición)", start:"2026-03-30", end:"2026-04-05", ref:"Escenario Repetición"},
      {id:74, t:"Capacitación jurados (Repetición)", start:"2026-03-30", end:"2026-04-05", ref:"Escenario Repetición"},
      {id:75, t:"Lugar cómputo (Repetición)", start:"2026-04-01", end:"2026-04-01", ref:"Escenario Repetición"},
      {id:76, t:"Mando fuerza pública (Repetición)", start:"2026-04-05", end:"2026-04-05", ref:"Escenario Repetición"},
      {id:77, t:"REPETICIÓN DE VOTACIÓN", start:"2026-04-05", end:"2026-04-05", ref:"Ley 026 Art. 177"},
      {id:78, t:"Cómputo Repetición", start:"2026-04-05", end:"2026-04-05", ref:"Escenario Repetición"},
      {id:79, t:"Proclamación resultados Repetición", start:"2026-04-05", end:"2026-04-06", ref:"Escenario Repetición"},
      {id:80, t:"Convocatoria Segunda Vuelta", start:"2026-04-06", end:"2026-04-06", ref:"Ley 026 Art. 53"},
      {id:81, t:"Sorteo ubicación papeleta (2da Vuelta)", start:"2026-04-06", end:"2026-04-06", ref:"2da Vuelta"},
      {id:82, t:"Propaganda Electoral (2da Vuelta)", start:"2026-04-06", end:"2026-04-15", ref:"2da Vuelta"},
      {id:83, t:"Encuestas (2da Vuelta)", start:"2026-04-07", end:"2026-04-12", ref:"2da Vuelta"},
      {id:84, t:"Sorteo Jurados (2da Vuelta)", start:"2026-04-07", end:"2026-04-07", ref:"2da Vuelta"},
      {id:85, t:"Publicación Jurados (2da Vuelta)", start:"2026-04-07", end:"2026-04-07", ref:"2da Vuelta"},
      {id:86, t:"Notificación Jurados (2da Vuelta)", start:"2026-04-08", end:"2026-04-19", ref:"2da Vuelta"},
      {id:87, t:"Excusas Jurados (2da Vuelta)", start:"2026-04-08", end:"2026-04-10", ref:"2da Vuelta"},
      {id:88, t:"Capacitación Jurados (2da Vuelta)", start:"2026-04-08", end:"2026-04-19", ref:"2da Vuelta"},
      {id:89, t:"Lugar cómputo (2da Vuelta)", start:"2026-04-15", end:"2026-04-15", ref:"2da Vuelta"},
      {id:90, t:"Silencio Electoral (2da Vuelta)", start:"2026-04-17", end:"2026-04-19", ref:"2da Vuelta"},
      {id:91, t:"Mando fuerza pública (2da Vuelta)", start:"2026-04-19", end:"2026-04-19", ref:"2da Vuelta"},
      {id:92, t:"SEGUNDA VUELTA ELECTORAL", start:"2026-04-19", end:"2026-04-19", ref:"Ley 026 Art. 53"},
      {id:93, t:"Inicio Cómputo (2da Vuelta)", start:"2026-04-19", end:"2026-04-19", ref:"2da Vuelta"},
      {id:94, t:"Boca de Urna (2da Vuelta)", start:"2026-04-19", end:"2026-04-19", ref:"2da Vuelta"},
      {id:95, t:"Resultados Preliminares (2da Vuelta)", start:"2026-04-19", end:"2026-04-19", ref:"2da Vuelta"},
      {id:96, t:"Cómputo Oficial (2da Vuelta)", start:"2026-04-19", end:"2026-04-22", ref:"2da Vuelta"},
      {id:97, t:"Propaganda (Repetición tras 2da Vuelta)", start:"2026-04-22", end:"2026-04-22", ref:"Repetición Final"},
      {id:98, t:"Lugar cómputo (Repetición Final)", start:"2026-04-22", end:"2026-04-22", ref:"Repetición Final"},
      {id:99, t:"Sorteo jurados (Repetición Final)", start:"2026-04-23", end:"2026-04-23", ref:"Repetición Final"},
      {id:100, t:"Notificación jurados (Repetición Final)", start:"2026-04-23", end:"2026-04-26", ref:"Repetición Final"},
      {id:101, t:"Capacitación jurados (Repetición Final)", start:"2026-04-23", end:"2026-04-26", ref:"Repetición Final"},
      {id:102, t:"Fuerza pública (Repetición Final)", start:"2026-04-26", end:"2026-04-26", ref:"Repetición Final"},
      {id:103, t:"REPETICIÓN VOTACIÓN (FINAL)", start:"2026-04-26", end:"2026-04-26", ref:"Repetición Final"},
      {id:104, t:"Cómputo (Repetición Final)", start:"2026-04-26", end:"2026-04-26", ref:"Repetición Final"},
      {id:105, t:"Proclamación Resultados (Final)", start:"2026-04-26", end:"2026-04-27", ref:"Repetición Final"},
      {id:106, t:"Envío resultados a TSE", start:"2026-04-27", end:"2026-04-27", ref:"Cierre"},
      {id:107, t:"Entrega actas a TSE", start:"2026-04-27", end:"2026-04-28", ref:"Cierre"},
      {id:108, t:"Entrega Credenciales", start:"2026-04-30", end:"2026-04-30", ref:"Ley 026 Art. 192"},
      {id:109, t:"Publicación Resultados Prensa", start:"2026-05-03", end:"2026-05-08", ref:"Ley 026 Art. 191"},
      {id:110, t:"Entrega informe final del proceso", start:"2026-05-12", end:"2026-05-12", ref:"Ley 026 Art. 182"}
    ];

    // ==========================================
    // LÓGICA DE RENDERIZADO
    // ==========================================

    // Configuración fecha actual
    const today = new Date(); // Usa fecha del sistema
    // const today = new Date("2025-12-30"); // Descomentar para probar visualización

    document.getElementById('display-date').innerText = today.toLocaleDateString('es-BO', { day: 'numeric', month: 'short', year: 'numeric' });

    // Cuenta regresiva (22 Marzo)
    const electionDate = new Date("2026-03-22");
    const diffTime = electionDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    document.getElementById('days-left').innerText = diffDays > 0 ? diffDays : "¡Hoy!";

    // Barra de progreso
    const startDate = new Date("2025-11-20");
    const totalDuration = new Date("2026-05-12") - startDate;
    const elapsed = today - startDate;
    let percent = Math.floor((elapsed / totalDuration) * 100);
    percent = Math.max(0, Math.min(100, percent));

    document.getElementById('progress-bar').style.width = percent + "%";
    document.getElementById('progress-text').innerText = percent + "% Completado";

    // Renderizar Lista
    const listContainer = document.getElementById('list-container');
    const searchInput = document.getElementById('search');
    const noResults = document.getElementById('no-results');
    let currentId = null;

    function renderList(filter = "") {
        listContainer.innerHTML = "";
        let found = false;

        // Línea vertical continua (fondo)
        const verticalLine = document.createElement('div');
        verticalLine.className = "absolute left-[23px] top-4 bottom-4 w-0.5 bg-slate-200 -z-10";
        listContainer.appendChild(verticalLine);

        activities.forEach(item => {
            if(filter && !item.t.toLowerCase().includes(filter.toLowerCase()) && !item.ref.toLowerCase().includes(filter.toLowerCase())) return;
            found = true;

            const start = new Date(item.start); start.setHours(0,0,0,0);
            const end = new Date(item.end); end.setHours(23,59,59,999);

            // Determinar estado
            let status = "future"; // futuro
            if (today > end) status = "past"; // pasado
            else if (today >= start && today <= end) { status = "current"; currentId = item.id; } // actual

            // Estilos dinámicos
            let dotClass = "bg-white border-slate-300";
            let rowClass = "";
            let textClass = "text-slate-700";
            let dateClass = "text-slate-500 bg-slate-100";
            let statusBadge = "";

            if (status === "past") {
                dotClass = "bg-emerald-500 border-emerald-500";
                rowClass = "opacity-60 hover:opacity-100 transition-opacity";
                textClass = "text-slate-500 line-through";
                statusBadge = `<span class="ml-auto text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded">COMPLETADO</span>`;
            } else if (status === "current") {
                dotClass = "bg-rose-500 border-rose-500 pulse-dot shadow-lg shadow-rose-200";
                rowClass = "active-row bg-white rounded-xl shadow-soft -mx-2 px-2 py-4 border-l-4 border-rose-500 relative z-10 transform scale-[1.02]";
                textClass = "text-slate-900 font-bold text-lg";
                dateClass = "text-rose-700 bg-rose-50 font-bold border border-rose-100";
                statusBadge = `<span class="ml-auto text-[10px] font-bold text-white bg-rose-600 px-2 py-1 rounded animate-pulse">EN CURSO</span>`;
            }

            // Formato fechas
            const dateStr = start.toLocaleDateString('es-BO', {day:'numeric', month:'short'}) +
                           (item.start !== item.end ? ` - ${end.toLocaleDateString('es-BO', {day:'numeric', month:'short'})}` : "");

            const html = `
                <div id="hito-${item.id}" class="relative flex gap-4 py-3 group ${rowClass}">
                    <div class="flex-shrink-0 w-12 flex justify-center pt-1">
                        <div class="w-4 h-4 rounded-full border-2 ${dotClass} z-10 bg-white"></div>
                    </div>

                    <div class="flex-grow pb-4 border-b border-slate-100 group-last:border-0">
                        <div class="flex flex-col sm:flex-row sm:items-center gap-2 mb-1">
                            <span class="text-xs font-mono text-slate-400 mr-1">#${item.id}</span>
                            <span class="text-xs px-2 py-0.5 rounded ${dateClass} w-fit">${dateStr}</span>
                            ${statusBadge}
                        </div>
                        <h3 class="${textClass}">${item.t}</h3>
                        <p class="text-xs text-slate-400 mt-1 font-mono uppercase">Ref: ${item.ref}</p>
                    </div>
                </div>
            `;
            listContainer.insertAdjacentHTML('beforeend', html);
        });

        if(!found) noResults.classList.remove('hidden');
        else noResults.classList.add('hidden');
    }

    // Inicializar
    renderList();

    // Búsqueda
    searchInput.addEventListener('input', (e) => renderList(e.target.value));

    // Botón para saltar al día actual
    function jumpToCurrent() {
        if(currentId) {
            const el = document.getElementById(`hito-${currentId}`);
            el.scrollIntoView({behavior: "smooth", block: "center"});
            // Efecto visual extra
            el.classList.add('ring-2', 'ring-rose-200', 'ring-offset-2');
            setTimeout(() => el.classList.remove('ring-2', 'ring-rose-200', 'ring-offset-2'), 2000);
        }
    }

    // Auto-scroll al cargar si hay un evento activo
    window.onload = () => {
        setTimeout(jumpToCurrent, 500);
    };

  </script>
</body>
</html>